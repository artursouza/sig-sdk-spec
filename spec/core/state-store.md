# State Store

## Methods

### Save Bulk State

* Method Name: `saveBulkState`
* Input Type: `SaveStateRequest`
* Input Name: `request`
* Output Type: `void`
* Since: `1.0`

#### SaveStateRequest
| Name | Type | Required | Default Value | Description |
|-----------|------|----------|---------------|-------------|
| `storeName` | `string` | Y | | The state store name for the operation. |
| `states` | array of `state` | N | `null` | Whether a value _must_ be provided for the parameter. |

#### Error Handling
| Case | Error Message | Expected result |
|-----------|------|-------------|
| Error invoking Dapr sidecar | `Error saving to state store {storeName}` | Returns error without result object | 
| Error deserializing one state | `Error deserializing state` | No error and state object contains `key`, `error` but no `value` |

#### HTTP Considerations

If domain object is serialized as JSON, it cannot be wrapped into a string in the `value` attribute of the state and must be set as RAW JSON object.

#### gRPC Considerations

None.

## Shared Types

### State
| Name | Type | Required | Default Value | Description |
|-----------|------|----------|---------------|-------------|
| `key` | `string` | Y | | The state's primary key. |
| `value` | `object` | N |`null` | The state's value as a deserialized object. |
| `etag` | `string` | N | `null` | The state's etag value generated by the state store, `null` for a new state. |
| `metadata` | Map of `string` to `string` | N | `null` | Metadata for state operations. |
| `error` | `string` | N | `null` | Error message when retrieving state. |
| `stateOptions` | `StateOptions` | N | `null` | Options when perfoming operation with this state. |

## References

* Building Block Overview: [State Store](https://docs.dapr.io/developing-applications/building-blocks/state-management/state-management-overview/)
* Building Block's Dapr API Reference (not the SDK API): [State Store Dapr API](
https://docs.dapr.io/reference/api/state_api/)